{# Article Cards layout using a Bootstrap card-group #}
{% load wagtailcore_tags wagtailimages_tags %}

<div class="card-group {% if self.settings.custom_css_class %}{{ self.settings.custom_css_class }}{% endif %}"
     {% if self.settings.custom_id %}id="{{ self.settings.custom_id }}"{% endif %}>
  {% for page in pages %}
    {% with page.specific as article %}
      <div class="card">
        {% if article.cover_image and self.show_covers %}
          {% image article.cover_image fill-900x600 as cover_image %}
          <a href="{{ article.url }}" title="{{ article.title }}">
            <img src="{{ cover_image.url }}" class="card-img-top" alt="{{ cover_image.title }}"/>
          </a>
        {% endif %}
        <div class="card-body">
          <h5 class="card-title"><a href="{{ article.url }}">{{ article.title }}</a></h5>
          {# Meta description, if available #}
          {% if article.seo_description %}
            <p class="card-text text-muted">{{ article.seo_description }}</p>
          {% endif %}
          {# Body: render preview if available, otherwise full body #}
          {% if article.body_preview %}
            <p class="card-text">{{ article.body_preview }}</p>
          {% elif article.body %}
            <div class="card-text">{{ article.body }}</div>
          {% endif %}
        </div>
        <div class="card-footer">
          <small class="text-muted">
            {{ article.seo_published_at }}
            {% if article.author_display %} &bull; {{ article.author_display }}
            {% elif article.seo_author %} &bull; {{ article.seo_author }}
            {% endif %}
          </small>
        </div>
      </div>
    {% endwith %}
  {% endfor %}
</div>


